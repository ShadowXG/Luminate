{% extends 'base.html' %}
{% block content %}
    <h1>Post List</h1>

    {% for post in posts %}
        <div class="card">
            <div class="card-content">
                <span class="card-title">{{ post.title }}</span>
                <p>Body: {{ post.body }}</p>
            </div>
            <div class="card-action">
                <div class="row">
                    <div class="col s6">
                        <a href="{% url 'posts_update' post.id %}" class="blue-text text-lighten-2">Edit</a>
                        <a href="{% url 'posts_delete' post.id %}" class="blue-text text-lighten-2">Delete</a>
                    </div>
                    <div class="col s6 right-align">
                        <form method="POST" action="{% url 'toggle_like' post_id=post.id %}" class="float-right">
                            {% csrf_token %}
                            <button type="submit" class="btn btn-sm {% if request.user in post.likes.all %}btn-primary{% else %}btn-secondary{% endif %}">
                                {% if request.user in post.likes.all %}
                                    <i class="fas fa-heart red-text">Unlike</i>
                                {% else %}
                                    <i class="far fa-heart">Like</i>
                                {% endif %}
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    {% endfor %}
{% endblock %}